<%= javascript_include_tag "axios.js" %>
<script>
function consultar(){
   if ($('#taquilla').val() != "0"){
      axios({
          method: 'POST',
            url: '/solicitudes/movimiento_cajero_reporte',
          data: {
                 "desde": $('#desde').val(),
                 "hasta": $('#hasta').val(),
                 "taquilla_id": $('#taquilla').val()
                },
        })
        .then(function(response) {
             $('#cuerpo_div').html(response.data);
          }

      )
      .catch(function (error) {
          swal("Lo siento", "No hay datos.", "error");
      });
    }
}





</script>

<form>
<div class="row">
<div class="col-xs-12">
  <div class="box">

    <div class="box-header">
      <h3 class="box-title">Movimientos</h3>
    </div>


    <div class="form-group">

      <div class="container">
        <div class="box">
            <div class="form-group">
                <label for="desde_fecha">Desde</label>
                <input type="date" class="form-control" id="desde" name="desde" required="true" value="<%= Time.now.strftime('%Y/%m/%d') %>">
            </div>
            <div class="form-group">
                <label for="hasta_fecha">Hasta</label>
                <input type="date" class="form-control" id="hasta" name="hasta" required="true" value="<%= Time.now.strftime('%Y/%m/%d') %>">
            </div>
        </div>
        <div class="box">
            <div class="form-group">
                <label for="tipo">Tipo</label>
                <select class="form-control" size=1 id="taquilla">
                    <option value="0" >Seleccione el Cliente</option>
                    <%for taq in @taquillas%>
                      <option data-tokens="<%=taq.id%>" value="<%=taq.id%>"><%= taq.alias%> (<%= taq.nombre%>) </option>
                    <%end%>
                  </select>
            </div>
        </div>
        <div class="box-footer">
            <input type="button" value="Aceptar" class="btn btn-success" onclick="consultar()">
        </div>
      </div>

      <div class="form-group">
         <div id='cuerpo_div'>
         </div>
      </div>
    </div>
  </div>
</div>
</div>
</form>
<script>
   window.boton_check() ;
   $('#desde').val("<%= Time.now.strftime('%Y-%m-%d')%>");
   $('#hasta').val("<%= Time.now.strftime('%Y-%m-%d')%>");
   $("#taquilla").select2({
     matcher: select_con_busqueda
   });


</script>
