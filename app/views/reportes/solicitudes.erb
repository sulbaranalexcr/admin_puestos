<%= javascript_include_tag "axios.js" %>
<script>
function consultar(){
axios({
    method: 'POST',
      url: '/reportes/solicitudes',
    data: {
           "tipo": $('#tipo').val(),
           "estado": $('#estado').val(),
           "desde": $('#desde').val(),
           "hasta": $('#hasta').val()
          },
  })
  .then(function(response) {
       $('#cuerpo_div').html(response.data);
    }

)
.catch(function (error) {
    swal("Lo siento", "No hay datos.", "error");
});

}

</script>

<form>
<div class="row">
<div class="col-xs-12">
  <div class="box">

    <div class="box-header">
      <h3 class="box-title">Solicitudes</h3>
    </div>


    <div class="form-group">

    <div class="container">
        <div class="box">
            <div class="form-group">
                <label for="desde_fecha">Desde</label>
                <input type="date" class="form-control" id="desde" name="desde" required="true" value="<%= Time.now.strftime('%Y/%m/%d') %>">
            </div>
            <div class="form-group">
                <label for="hasta_fecha">Hasta</label>
                <input type="date" class="form-control" id="hasta" name="hasta" required="true" value="<%= Time.now.strftime('%Y/%m/%d') %>">
            </div>
        </div>
        <div class="box">
            <div class="form-group">
                <label for="tipo">Tipo</label>
                <select class="form-control" id="tipo">
                    <option value="0">Todas</option>
                    <option value="1">Recargas</option>
                    <option value="2">Pagos</option>
                </select>
            </div>
            <div class="form-group">
                <label for="estado">Estado</label>
                <select class="form-control" id="estado">
                    <option value="0">Todos</option>
                    <option value="1">Pendientes</option>
                    <option value="2">Procesadas</option>
                    <option value="3">Rechazadas</option>
                </select>
            </div>
        </div>
        <div class="box-footer">
            <input type="button" value="Aceptar" class="btn btn-success" onclick="consultar()">
        </div>
    </div>


      <div class="form-group">
         <div id='cuerpo_div'>
         </div>
      </div>



    </div>



  </div>
</div>
</div>
</form>
<script>
   window.boton_check() ;
   $('#desde').val("<%= Time.now.strftime('%Y-%m-%d')%>");
   $('#hasta').val("<%= Time.now.strftime('%Y-%m-%d')%>");
</script>
